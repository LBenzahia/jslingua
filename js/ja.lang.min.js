varisHiragana=isBetween(0x3040,0x309F);varcontainsHiragana=contains(isHiragana);varallHiragana=all(isHiragana);varisKatakana=isBetween(0x30A0,0x30FF);varcontainsKatakana=contains(isKatakana);varallKatakana=all(isKatakana);varisKanji=isBetween(0x4E00,0x9FBF);varcontainsKanji=contains(isKanji);varallKanji=all(isKanji);varisPunctuation=isBetween(0x3000,0x303F);varcontainsPunctuation=contains(isPunctuation);varallPunctuation=all(isPunctuation);varlookup={0:"零",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九",10:"十",100:"百",1000:"千",10000:"万",100000000:"億",1000000000000:"兆"}varbigNbr=[1000000000000,100000000,10000,1000,100,10]functiontoJapaneseLetters(num){if(isNaN(num))return"";varneg=false;if(num<0){neg=true;num=-num;}if(num<10)returnlookup[num];vari=0;varmax=1;vardiv;for(i=0;i<bigNbr.length;i++){max=bigNbr[i]div=~~(num/max);if(div>0)break;}varrem=~~(num%max);varresult="";if(div>0)if(div>1||max>1000)result+=toJapaneseLetters(div);result+=lookup[max];if(rem>0)result+=toJapaneseLetters(rem);if(neg)result="マイナス"+result;returnresult;}functiontransform(diff,charTestFunc){returnfunction(text){varresult="";for(vari=0;i<text.length;i++){varu=text.charCodeAt(i);if(charTestFunc(u))u+=diff;result+=String.fromCharCode(u);}returnresult;}}varhiraganaToKatakana=transform(0x0060,isHiragana);varkatakanaToHiragana=transform(-0x0060,isKatakana);
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Translateration</title>
  <script type="text/javascript" src="../../trans.js" ></script>
  <script type="text/javascript" src="../../ar/ar.trans.js" ></script>
  <script type="text/javascript" src="../../ja/ja.trans.js" ></script>
  <script type="text/javascript">

  var transformer = {};

  function update (){
    var e = document.getElementById("l");
    var l = e.options[e.selectedIndex].value;

    switch(l) {
      case "1":
      transformer = new ArTrans();
      break;
      case "2":
      transformer = new JaTrans();
      break;
      default:
      transformer = new ArTrans();
    }

    var methods = transformer.availableMethods();

    var m = document.getElementById("m");
    var i;
    for(i = m.options.length - 1 ; i >= 0 ; i--){
      m.remove(i);
    }

    methods.forEach(function(element, index, array){
      var option = document.createElement("option");
      option.text = element;
      m.add(option);
    });

    setMethod();

  }

  function setMethod(){
    var m = document.getElementById("m");
    transformer.setCurrentMethod(m.options[m.selectedIndex].value);
  }

  function lang2trans() {
    var lang = document.getElementById("lang");
    var trans = document.getElementById("2trans");
    trans.value = transformer.translaterate(lang.value);
  }

  function trans2lang() {
    var lang = document.getElementById("2lang");
    var trans = document.getElementById("trans");
    lang.value = transformer.untranslaterate(trans.value);
  }
  </script>

</head>
<body>
  Choose the language:
  <select id="l" onchange="update()">
    <option value="1" >Arabic</option>
    <option value="2">Japanese</option>
  </select>
  <select id="m" onchange="setMethod()">
  </select>
  <br>
  <input type="text" id="lang" />
  <button onclick="lang2trans()">To Translateration</button>
  <input type="text" id="2trans" />
  <br>
  <input type="text" id="trans" />
  <button onclick="trans2lang()">From Translateration</button>
  <input type="text" id="2lang" />
  <script>
  update();
  </script>
</body>
</html>
